# Logic App-10: Employee Data Processing

This **Logic App** processes an array of employees sent via HTTP POST and performs multiple operations:

- Creates a **CSV table** of employees
- Creates a **HTML table** of employees
- Filters employees in the **IT department**
- Selects employee names and joins them as a comma-separated string
- Selects employee names and emails for structured output

---

## ðŸš€ Features

- Accepts multiple employee records in a single request.
- Outputs multiple formats (CSV, HTML) for reporting.
- Filters and selects employee data dynamically.
- Fully automated using **Azure Logic Apps (Consumption)**.

---

## ðŸ›  Steps to Create

### 1. Create the Logic App

- Go to **Azure Portal** â†’ **Create a Resource** â†’ Search **Logic App (Consumption)**.
- Select your **Resource Group**, provide a **Logic App Name**, choose a **Region**, and click **Create**.

---

### 2. Open Logic App Designer

- Open your Logic App â†’ **Logic App Designer**.
- Select **Blank Logic App**.

---

### 3. Add Trigger: When a HTTP Request is Received

- Search for **HTTP** â†’ select **When a HTTP request is received**.
- Configure:
  - **Method:** POST
  - **Request Body JSON Schema:**
    ```json
    {
      "type": "object",
      "properties": {
        "employees": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "email": { "type": "string" },
              "dept": { "type": "string" }
            },
            "required": ["name", "email", "dept"]
          }
        }
      }
    }
    ```

---

### 4. Create CSV Table

- Add **Data Operations â†’ Create CSV table**.
- Configure:
  - **From:** `@triggerBody()?['employees']`
  - **Format:** CSV

---

### 5. Create HTML Table

- Add **Data Operations â†’ Create HTML table** **after CSV table**.
- Configure:
  - **From:** `@triggerBody()?['employees']`
  - **Format:** HTML
  - **Columns:** Custom  
    | Header | Value |
    |-----------------|---------------------------|
    | Employee Name | `@item()?['name']` |
    | Email Address | `@item()?['email']` |
    | Department | `@item()?['dept']` |

---

### 6. Filter Array (IT Department)

- Add **Data Operations â†’ Filter array** **after HTML table**.
- Configure:
  - **From:** `@triggerBody()?['employees']`
  - **Condition:**
    ```expression
    @equals(item()?['dept'], '"IT"')
    ```

---

### 7. Select Names

- Add **Data Operations â†’ Select** **after Filter array**.
- Configure:
  - **From:** `@triggerBody()?['employees']`
  - **Map:**
    - Name â†’ `@item()?['name']`

---

### 8. Join Names

- Add **Data Operations â†’ Join** **after Select**.
- Configure:
  - **From:** `@body('Select')`
  - **Join With:** `,`

---

### 9. Select Employee Names & Emails

- Add **Data Operations â†’ Select** **after Join**.
- Configure:
  - **From:** `@triggerBody()?['employees']`
  - **Map:**
    - Employee-Name â†’ `@item()?['name']`
    - empMail â†’ `@item()?['email']`

---

### 10. Send Response

- Add **Response (HTTP)** **after the last Select**.
- Configure:
  - **Status Code:** 200
  - **Body:**
    ```json
    {
      "CSV Table": "@outputs('Create_CSV_table')",
      "HTML-table": "@outputs('Create_HTML_table')",
      "Filtered Array": "@outputs('Filter_array')",
      "Joined Names": "@outputs('Join')",
      "Selected Array": "@outputs('Select_1')"
    }
    ```

---

### 11. Save & Test

- Click **Save**.
- Copy the HTTP POST URL generated by the trigger.
- Send a POST request with JSON like:

```json
{
  "employees": [
    { "name": "Jagrit", "email": "jagrit@example.com", "dept": "IT" },
    { "name": "Alice", "email": "alice@example.com", "dept": "HR" },
    { "name": "Bob", "email": "bob@example.com", "dept": "IT" }
  ]
}
```
